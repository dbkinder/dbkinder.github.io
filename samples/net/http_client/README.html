

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" > <!--<![endif]-->
  <head>
    <meta charset="utf-8">
   <!-- Google Tag Manager -->
   <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
   new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
   })(window,document,'script','dataLayer','GTM-KMP8MS');</script>
   <!-- End Google Tag Manager -->
    <link rel="apple-touch-icon" sizes="57x57" href="../../../_static/img/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../../../_static/img/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../../../_static/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../../../_static/img/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../../../_static/img/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../../../_static/img/apple-touch-icon-120x120.png">
    <link rel="icon" type="image/png" href="../../../_static/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../../_static/img/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="../../../_static/img/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="../../../_static/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Zephyr Project">
    <meta name="application-name" content="Zephyr Project">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    
    <title>HTTP Client &mdash; Zephyr Project Documentation</title>
    

    
    

    

    
    
      
    

    
    
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    

    
      <link rel="stylesheet" href="../../../_static/zephyr-custom.css" type="text/css" />
    
      <link rel="stylesheet" href="../../../_static/css/normalize.css" type="text/css" />
    
      <link rel="stylesheet" href="../../../_static/css/layout.css" type="text/css" />
    
      <link rel="stylesheet" href="../../../_static/css/main.css" type="text/css" />
    
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    

    
        <link rel="index" title="Index" href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
        <link rel="copyright" title="Copyright" href="../../../copyright.html"/>
      <link rel="top" title="Zephyr Project Documentation" href="../../../index.html"/>
        <link rel="up" title="Networking Samples" href="../net.html"/>
        <link rel="next" title="HTTP Server" href="../http_server/README.html"/>
        <link rel="prev" title="Echo Server" href="../echo_server/README.html"/> 

    
    <script src="../../../_static/js/modernizr.min.js"></script>

  </head>

  <body class="not-front page-documentation one-sidebar sidebar-first" role="document" >
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KMP8MS"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="page">
      <header id="header">
  <div class="header-wrapper">
    <div class="container">
      <a href="https://zephyrproject.org/" title="Zephyr Project" rel="home" id="logo">
        <img src="../../../_static/img/logo_white.png" alt="Zephyr Project">
      </a>
      <a href="" id="navigation-toggle">
        <span> </span>
        Menu
      </a>
      <nav id="navigation" class="menu with-primary with-secondary">
        <ul class="header-menu main-menu">
          <li class="first expanded about mid-1209"><a href="https://zephyrproject.org/about/"><span>About</span></a>
            <ul class="menu">
              <li class="first leaf what-is-zephyr mid-2563"><a href="https://zephyrproject.org/what-is-zephyr/"><span>What is the Zephyr Project?</span></a></li>
              <li class="leaf organization mid-2564"><a href="https://zephyrproject.org/about/organization/"><span>Organization</span></a></li>
              <li class="leaf memberships mid-2532"><a href="https://zephyrproject.org/#members"><span>Members</span></a></li>
              <li class="leaf faq mid-2525"><a href="https://zephyrproject.org/about/#faq"><span>FAQ</span></a></li>
              <li class="leaf join mid-2622"><a href="https://zephyrproject.org/join/"><span>Join</span></a></li>
              <li class="last leaf contact-us mid-2530"><a href="https://zephyrproject.org/about/#contact-us"><span>Contact Us</span></a></li>
            </ul>
          </li>
          <li class="expanded developers mid-1209"><a href="https://zephyrproject.org/developers/"><span>Developers</span></a>
            <ul class="menu">
              <li class="first expanded leaf code mid-2563"><a href="https://github.com/zephyrproject-rtos/zephyr/" target="_blank"><span>Code</span></a></li>
              <li class="leaf downloads mid-2564"><a href="https://zephyrproject.org/developers/#downloads"><span>Downloads</span></a></li>
              <li class="leaf documentation mid-2564"><a href="http://docs.zephyrproject.org/index.html" target="_blank"><span>Documentation</span></a></li>
              <li class="leaf supported-boards mid-2564"><a href="http://docs.zephyrproject.org/boards/boards.html" target="_blank"><span>Supported Boards</span></a></li>
              <li class="leaf releases-overview mid-2564"><a href="https://zephyrproject.org/developers/#releases-overview"><span>Releases Overview</span></a></li>
              <li class="leaf how-to-contribute mid-2564"><a href="https://zephyrproject.org/developers/how-to-contribute/"><span>How to Contribute</span></a></li>
              <li class="last leaf community-guidelines mid-2564"><a href="https://zephyrproject.org/developers/how-to-contribute/#community-guidelines"><span>Community Guidelines</span></a></li>
            </ul>
          </li>
          <li class="expanded news mid-1209"><a href="https://zephyrproject.org/news/"><span>News</span></a>
            <ul class="menu">
              <li class="first leaf announcements mid-2563"><a href="https://zephyrproject.org/news/announcements/"><span>Announcements</span></a></li>
              <li class="leaf blog mid-2563"><a href="https://zephyrproject.org/news/blog/"><span>Blog</span></a></li>
              <li class="last leaf events mid-2563"><a href="https://zephyrproject.org/events/"><span>Events</span></a></li>
            </ul>
          </li>
          <li class="last expanded project-resources mid-1209"><a href="https://zephyrproject.org/project-resources/"><span>Project Resources</span></a>
            <ul class="menu">
              <li class="first leaf presentations mid-2563"><a href="https://zephyrproject.org/project-resources/presentations/"><span>Presentations</span></a></li>
              <li class="leaf videos mid-2563"><a href="https://zephyrproject.org/project-resources/videos/"><span>Videos</span></a></li>
              <li class="leaf demos mid-2563"><a href="https://zephyrproject.org/project-resources/demos/"><span>Demos</span></a></li>
              <li class="leaf zephyr-in-market mid-2563"><a href="https://zephyrproject.org/project-resources/zephyr-in-market/"><span>Zephyr in Market</span></a></li>
              <li class="last leaf developer-tools mid-2563"><a href="https://zephyrproject.org/project-resources/developer-tools/"><span>Developer Tools</span></a></li>
            </ul>
          </li>
        </ul>
      </nav><!-- /navigation -->
    </div>
  </div>
</header><!-- /header -->
      <!-- STARTS #main -->
      <div id="main">
        <!-- STARTS .main-container -->
        <div class="main-container">
          

 



<!-- Docs -->





<div id="breadcrumb">
  <div class="container">
    <a href="/">Home</a> / 
    <a href="../../../index.html">Docs</a> /
      
          <a href="../../../application/index.html">Developer Guides</a> /
      
          <a href="../../samples.html">Samples and Demos</a> /
      
          <a href="../net.html">Networking Samples</a> /
      
  </div>
</div>
          <aside id="sidebar-first" class="container-sidebar">
            
            <span id="secondary-menu-button" class="">Documentation</span>
<div class="region region-sidebar">
  <div class="docs-menu">
  
    
    
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/introducing_zephyr.html">Introducing Zephyr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/getting_started.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/contribute.html">Contributing to the Zephyr Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel/kernel.html">Zephyr Kernel Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/security.html">Zephyr Project Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../application/index.html">Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../porting/porting.html">Porting Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../application/application.html">Application Development Primer</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../samples.html">Samples and Demos</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../kernel.html">Kernel Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../basic/basic.html">Basic Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../subsys/subsys.html">Various Subsystems Samples</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../net.html">Networking Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bluetooth/bluetooth.html">Bluetooth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sensor/sensor.html">Sensor Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../grove/grove.html">Grove Kit Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../boards/boards.html">Board-specific samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mpu/index.html">MMU/MPU Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../drivers/drivers.html">Driver Samples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/kconfig/index.html">Configuration Options Reference Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/api.html">API Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../README.html">Zephyr documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/boards.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devices/index.html">Device and Driver Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../subsystems/subsystems.html">Subsystems</a></li>
</ul>

    
  
  </div>
<div role="search" class="sphinx-search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search documentation" class="search-documentation" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</div>
          </aside>
          <!-- STARTS .content SECTION-->
          <section id="content" class="row">
            
	    
            <div class="rst-content">
              <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
                <div itemprop="articleBody">
                  
  <div class="section" id="http-client">
<span id="http-client-sample"></span><h1>HTTP Client<a class="headerlink" href="#http-client" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This sample application shows how to create HTTP 1.1 requests to
an HTTP server and how to parse the incoming responses.
Supported HTTP 1.1 methods are: GET, HEAD and POST.</p>
<p>The source code for this sample application can be found at:
<code class="file docutils literal"><span class="pre">samples/net/http_client</span></code>.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../../subsystems/networking/qemu_setup.html#networking-with-qemu"><span class="std std-ref">Networking with QEMU</span></a></li>
<li>Terminal emulator software</li>
<li>HTTP Server</li>
<li>DNS server (optional)</li>
</ul>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h2>
<p>Open the project configuration file for your platform, for example:
<code class="file docutils literal"><span class="pre">prj_qemu_x86.conf</span></code> is the configuration file for QEMU.</p>
<p>To use QEMU for testing, follow the <a class="reference internal" href="../../../subsystems/networking/qemu_setup.html#networking-with-qemu"><span class="std std-ref">Networking with QEMU</span></a> guide.</p>
<p>For IPv4 networks, set the following variables:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">CONFIG_NET_IPV4=y</span>
<span class="go">CONFIG_NET_IPV6=n</span>
</pre></div>
</div>
<p>IPv6 is the preferred routing technology for this sample application,
if CONFIG_NET_IPV6=y is set, the value of CONFIG_NET_IPV4=y is ignored.</p>
<p>In this sample application, both static IP addresses and DHCPv4 are supported.
Static IP addresses are specified in the project configuration file,
for example:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">CONFIG_NET_APP_MY_IPV6_ADDR=&quot;2001:db8::1&quot;</span>
<span class="go">CONFIG_NET_APP_PEER_IPV6_ADDR=&quot;2001:db8::2&quot;</span>
</pre></div>
</div>
<p>are the IPv6 addresses for the HTTP client running Zephyr and the
HTTP server, respectively. The application also supports DNS resolving so the
peer address is resolved automatically if host name is given, so you
can also write the HTTP server name like this:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">CONFIG_NET_APP_MY_IPV6_ADDR=&quot;2001:db8::1&quot;</span>
<span class="go">CONFIG_NET_APP_PEER_IPV6_ADDR=&quot;6.zephyr.test&quot;</span>
</pre></div>
</div>
<p>Open the <code class="file docutils literal"><span class="pre">src/config.h</span></code> file and set the server port
to match the HTTP server setup, for example:</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="cp">#define SERVER_PORT          8000</span>
</pre></div>
</div>
<p>assumes that the HTTP server is listening at the TCP port 8000.</p>
<div class="section" id="http-server">
<h3>HTTP Server<a class="headerlink" href="#http-server" title="Permalink to this headline">¶</a></h3>
<p>Sample code for a very simple HTTP server can be downloaded from the
zephyrproject-rtos/net-tools project area:
<a class="reference external" href="https://github.com/zephyrproject-rtos/net-tools">https://github.com/zephyrproject-rtos/net-tools</a></p>
<p>Open a terminal window and type:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> net-tools
<span class="gp">$</span> ./http-server.sh
</pre></div>
</div>
</div>
<div class="section" id="dns-setup">
<h3>DNS setup<a class="headerlink" href="#dns-setup" title="Permalink to this headline">¶</a></h3>
<p>The net-tools project provides a simple DNS resolver. You can activate
it like this if you want to test the DNS resolving with HTTP client.</p>
<p>Open a terminal window and type:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> net-tools
<span class="gp">$</span> ./dnsmasq.sh
</pre></div>
</div>
</div>
<div class="section" id="sample-output">
<h3>Sample Output<a class="headerlink" href="#sample-output" title="Permalink to this headline">¶</a></h3>
<p>This sample application loops a specified number of times doing several
HTTP 1.1 requests and printing some output. The requests are:</p>
<ul class="simple">
<li>GET “/index.html”</li>
<li>HEAD “/”</li>
<li>POST “/post_test.php”</li>
<li>GET “/big-file.html”</li>
</ul>
<p>The terminal window where QEMU is running will show something similar
to the following:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[http-client] [INF] do_sync_http_req: [19] Send /index.html</span>
<span class="go">[http-client] [INF] do_sync_http_req: HTTP server response status: OK</span>
<span class="go">[http-client] [INF] do_sync_http_req: HTTP body: 170 bytes, expected: 170 bytes</span>
<span class="go">[http-client] [INF] do_sync_http_req: [19] Send /</span>
<span class="go">[http-client] [INF] do_sync_http_req: HTTP server response status: OK</span>
<span class="go">[http-client] [INF] do_sync_http_req: [19] Send /post_test.php</span>
<span class="go">[http-client] [INF] do_sync_http_req: HTTP server response status: OK</span>
<span class="go">[http-client] [INF] do_sync_http_req: HTTP body: 24 bytes, expected: 24 bytes</span>
<span class="go">[http-client] [INF] do_sync_http_req: [20] Send /index.html</span>
<span class="go">[http-client] [INF] do_sync_http_req: HTTP server response status: OK</span>
<span class="go">[http-client] [INF] do_sync_http_req: HTTP body: 170 bytes, expected: 170 bytes</span>
<span class="go">[http-client] [INF] do_sync_http_req: [20] Send /</span>
<span class="go">[http-client] [INF] do_sync_http_req: HTTP server response status: OK</span>
<span class="go">[http-client] [INF] do_sync_http_req: [20] Send /post_test.php</span>
<span class="go">[http-client] [INF] do_sync_http_req: HTTP server response status: OK</span>
<span class="go">[http-client] [INF] do_sync_http_req: HTTP body: 24 bytes, expected: 24 bytes</span>
<span class="go">[http-client] [INF] main: --------Sending 20 async request--------</span>
<span class="go">[http-client] [INF] do_async_http_req: [1] Send /index.html</span>
<span class="go">[http-client] [INF] response: Received 356 bytes piece of data</span>
<span class="go">[http-client] [INF] response: HTTP server response status: OK</span>
<span class="go">[http-client] [INF] response: HTTP body: 170 bytes, expected: 170 bytes</span>
<span class="go">[http-client] [INF] do_async_http_req: [1] Send /</span>
<span class="go">[http-client] [INF] response: HTTP server response status: OK</span>
<span class="go">[http-client] [INF] do_async_http_req: [1] Send /post_test.php</span>
<span class="go">[http-client] [INF] response: Received 163 bytes piece of data</span>
<span class="go">[http-client] [INF] response: HTTP server response status: OK</span>
<span class="go">[http-client] [INF] response: HTTP body: 24 bytes, expected: 24 bytes</span>
<span class="go">[http-client] [INF] do_async_http_req: [1] Send /big-file.html</span>
<span class="go">[http-client] [INF] response: Received 657 bytes piece of data</span>
<span class="go">[http-client] [INF] response: Received 640 bytes piece of data</span>
<span class="go">[http-client] [INF] response: Received 418 bytes piece of data</span>
<span class="go">[http-client] [INF] response: HTTP server response status: OK</span>
<span class="go">[http-client] [INF] response: HTTP body: 1528 bytes, expected: 1528 bytes</span>
</pre></div>
</div>
</div>
</div>
</div>


                </div>
              </div>
              <!-- 
  <div class="rst-footer-buttons row" role="navigation" aria-label="footer navigation">
    
      <a href="../http_server/README.html" class="btn btn-neutral float-right" title="HTTP Server" accesskey="n">
        Next <span class="fa fa-arrow-circle-right"></span>
      </a>
    
    
      <a href="../echo_server/README.html" class="btn btn-neutral" title="Echo Server" accesskey="p">
        <span class="fa fa-arrow-circle-left"></span> Previous
      </a>
    
  </div>
  for ZEP-463 remove the prev/next links -->
            </div>
            <!-- ENDS #content SECTION -->
          </section>
          <!-- ENDS .content -->
        </div>
        <!-- ENDS .main-container -->
      </div>
      <!-- ENDS #main -->
      <footer id="footer">
  <div class="container">
    <div class="block block-menu block-odd first block" data-bid="menu-footer-menu">
      <h3 class="title">Footer Menu</h3>
      <ul class="menu">
        <li class="leaf google- mid-2404">
          <a href="https://plus.google.com/+ZephyrProject" class="google-plus"><span>Google+</span></a>
        </li>
        <li class="leaf twitter mid-2405">
          <a href="https://twitter.com/zephyriot" class="twitter"><span>Twitter</span></a>
        </li>
        <li class="last leaf email mid-2406">
          <a href="mailto:info@zephyrproject.org" class="email"><span>Email</span></a>
        </li>
      </ul>
    </div>
    <div class="block block-block block-even block" data-bid="block-4">
      <p>
        Zephyr Project © 2018 is a Linux Foundation Project. All Rights Reserved.
      </p>
      <p>
        <a href="https://linuxfoundation.org" target="_blank">Linux Foundation</a> is a registered trademark of The Linux Foundation. Linux is a registered <a href="https://www.linuxfoundation.org/about/linux-foundation-trademark-usage-guidelines" target="_blank">trademark</a> of Linus Torvalds.
      </p>
      <p>
        Please see our <a href="https://www.linuxfoundation.org/privacy" target="_blank">privacy policy</a> and <a href="https://www.linuxfoundation.org/terms" target="_blank">terms of use</a>
      </p>
    </div>
  </div>
</footer>
    </div>
    <!-- ENDS #page -->

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.10.99',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/js/main.js"></script>
      <script type="text/javascript" src="../../../_static/js/app.js"></script>
      <script type="text/javascript" src="../../../_static/js/affix.js"></script>

   

  </body>
</html>